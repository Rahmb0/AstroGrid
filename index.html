<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>
      AstroGrid - Secure Protocol for Agentic Registry and Communication
    </title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/feather-icons"></script>
    <!-- Improved responsive meta tags -->
    <meta name="theme-color" content="#29ABE2" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <style>
      :root {
        /* IC Dashboard color scheme */
        --primary: #29abe2;
        --primary-dark: #1d96c3;
        --primary-light: #d0edf7;
        --secondary: #522785;
        --secondary-dark: #3c1d5f;
        --secondary-light: #8e65b3;
        --success: #00c08b;
        --warning: #fcae30;
        --danger: #ed1e79;
        --dark: #111827;
        --light: #f5f8fc;
        --text-dark: #3d3d3d;
        --text-muted: #737373;
        --bg-grid: #f7f9fc;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.02);
        }
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes rainbow {
        0% {
          border-color: var(--primary);
        }
        33% {
          border-color: var(--success);
        }
        66% {
          border-color: var(--warning);
        }
        100% {
          border-color: var(--primary);
        }
      }

      @keyframes dash {
        to {
          stroke-dashoffset: 0;
        }
      }

      @keyframes gradientFlow {
        0% {
          stroke: var(--primary);
        }
        50% {
          stroke: var(--secondary);
        }
        100% {
          stroke: var(--primary);
        }
      }

      @keyframes glow {
        0%,
        100% {
          filter: drop-shadow(0 0 2px rgba(41, 171, 226, 0.3));
        }
        50% {
          filter: drop-shadow(0 0 6px rgba(41, 171, 226, 0.6));
        }
      }

      .animate-fadeIn {
        animation: fadeIn 0.8s ease-out forwards;
      }

      .animate-pulse {
        animation: pulse 2s infinite;
      }

      .animate-float {
        animation: float 3s ease-in-out infinite;
      }

      .animate-slideInRight {
        animation: slideInRight 0.5s ease-out forwards;
      }

      .animate-rainbow {
        animation: rainbow 6s infinite;
      }

      .animate-dash {
        animation: dash 2s linear forwards;
      }

      .animate-gradient {
        animation: gradientFlow 6s infinite;
      }

      .animate-glow {
        animation: glow 3s infinite;
      }

      .stagger-item {
        opacity: 0;
      }

      .card {
        background-color: white;
        border-radius: 0.75rem;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        transition:
          transform 0.3s,
          box-shadow 0.3s;
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
      }

      .feature-card {
        background-color: white;
        border-radius: 1rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        padding: 2rem;
        margin: 1rem;
        transition: all 0.3s ease;
        border-left: 4px solid transparent;
      }

      .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        border-left: 4px solid var(--primary);
      }

      .feature-icon {
        width: 60px;
        height: 60px;
        background-color: var(--primary-light);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1.5rem;
      }

      .button-primary {
        background-color: var(--primary);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        position: relative;
        overflow: hidden;
      }

      .button-primary:hover {
        background-color: var(--primary-dark);
        box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        transform: translateY(-2px);
      }

      .button-primary:active {
        transform: translateY(0);
      }

      .badge {
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.875rem;
        font-weight: 600;
        transition: all 0.3s;
      }

      .badge-green {
        background-color: #d1fae5;
        color: #047857;
      }

      .badge-yellow {
        background-color: #fef3c7;
        color: #92400e;
      }

      .badge-red {
        background-color: #fee2e2;
        color: #b91c1c;
      }

      .tab {
        padding: 0.75rem 1.5rem;
        cursor: pointer;
        position: relative;
        transition: all 0.3s;
      }

      .tab-active {
        color: var(--primary);
        font-weight: 600;
      }

      .tab-active::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background-color: var(--primary);
        animation: slideInRight 0.3s ease-out forwards;
      }

      /* Adding IC-style background grid pattern */
      .bg-pattern {
        background-color: var(--bg-grid);
        background-image: linear-gradient(
            rgba(209, 213, 219, 0.1) 1px,
            transparent 1px
          ),
          linear-gradient(
            to right,
            rgba(209, 213, 219, 0.1) 1px,
            transparent 1px
          );
        background-size: 20px 20px;
      }

      .hero-gradient {
        background: linear-gradient(
          135deg,
          var(--secondary-dark) 0%,
          var(--secondary) 40%,
          var(--primary) 100%
        );
        color: white;
        border-radius: 0.75rem;
        padding: 3rem;
        margin-bottom: 2rem;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        position: relative;
        overflow: hidden;
      }

      .hero-gradient::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
        opacity: 0.5;
        z-index: 0;
      }

      .glass-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: 1rem;
        padding: 2rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s;
      }

      .glass-card:hover {
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transform: translateY(-5px);
      }

      .stat-number {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary);
        line-height: 1;
      }

      .hidden {
        display: none;
      }

      /* Responsive Design Improvements */
      @media (max-width: 768px) {
        .hero-gradient {
          padding: 2rem 1rem;
          margin-left: -1rem;
          margin-right: -1rem;
          border-radius: 0;
        }

        .feature-card {
          padding: 1.5rem;
          margin: 0.5rem 0;
        }

        .card {
          padding: 1.25rem;
        }

        .stat-number {
          font-size: 2rem;
        }

        .glass-card {
          padding: 1.25rem;
        }

        .tab {
          padding: 0.5rem 1rem;
          font-size: 0.875rem;
        }

        /* Mobile menu adjustments */
        #user-info {
          position: absolute;
          top: 100%;
          right: 0;
          background: white;
          padding: 0.75rem;
          border-radius: 0.5rem;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          z-index: 50;
        }

        #user-info .flex {
          flex-direction: column;
          align-items: flex-start;
        }

        #user-info .mr-4 {
          margin-right: 0;
          margin-bottom: 0.5rem;
        }

        #principal-id {
          font-size: 0.75rem;
          word-break: break-all;
        }

        /* Improve mobile form elements */
        input,
        select,
        button {
          font-size: 16px !important; /* Prevents iOS zoom on focus */
        }

        /* Mobile search bar improvements */
        #name-search {
          font-size: 16px;
        }

        #search-button {
          font-size: 14px;
          padding-left: 1rem;
          padding-right: 1rem;
        }
      }

      /* Small phones */
      @media (max-width: 480px) {
        h1 {
          font-size: 1.75rem !important;
        }

        .button-primary {
          width: 100%;
          padding: 0.75rem 1rem;
          font-size: 1rem;
          text-align: center;
          display: block;
        }

        .hero-gradient {
          padding: 1.5rem 1rem;
        }

        .glass-card {
          padding: 1rem;
        }

        .feature-icon {
          width: 50px;
          height: 50px;
          margin-bottom: 1rem;
        }

        .feature-icon svg {
          width: 24px;
          height: 24px;
        }
      }
    </style>

    <!-- MailerLite Universal -->
    <script>
      (function (w, d, e, u, f, l, n) {
        (w[f] =
          w[f] ||
          function () {
            (w[f].q = w[f].q || []).push(arguments);
          }),
          (l = d.createElement(e)),
          (l.async = 1),
          (l.src = u),
          (n = d.getElementsByTagName(e)[0]),
          n.parentNode.insertBefore(l, n);
      })(
        window,
        document,
        "script",
        "https://assets.mailerlite.com/js/universal.js",
        "ml",
      );
      ml("account", "1437807");
    </script>
    <!-- End MailerLite Universal -->
  </head>
  <body class="bg-pattern min-h-screen">
    <header class="bg-white shadow-sm">
      <div class="container mx-auto px-4">
        <div class="flex justify-between items-center py-4">
          <div class="flex items-center">
            <div class="text-primary mr-2">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="28"
                height="28"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <polygon
                  points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"
                ></polygon>
              </svg>
            </div>
            <h1
              class="text-xl font-bold text-dark"
              style="letter-spacing: 0.05em"
            >
              AstroGrid
            </h1>
          </div>

          <div id="auth-section">
            <button id="login-button" class="button-primary">Sign Up</button>
            <div id="user-info" class="hidden">
              <div class="flex items-center">
                <div class="text-sm text-gray-600 mr-4">
                  <span class="font-medium">Principal: </span>
                  <span class="font-mono" id="principal-id">2vxsx-fae</span>
                </div>
                <button
                  id="logout-button"
                  class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm transition duration-200"
                >
                  Back to Home
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="container mx-auto px-4 py-8">
      <div id="welcome-screen">
        <!-- Hero Section -->
        <div class="hero-gradient mt-8">
          <div class="container mx-auto px-4 py-12 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-6 animate-fadeIn">
              Welcome to AstroGrid
            </h1>
            <p
              class="text-xl md:text-2xl opacity-90 mb-10 max-w-3xl mx-auto animate-fadeIn"
              style="animation-delay: 0.2s"
            >
              The Secure Protocol for Agentic Registry and Communication Built
              on the Internet Computer
            </p>

            <!-- New Name Search Bar -->
            <div
              class="max-w-2xl mx-auto mb-8 animate-fadeIn"
              style="animation-delay: 0.3s"
            >
              <div class="relative flex items-center">
                <div
                  class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-white opacity-60"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </div>
                <input
                  type="text"
                  id="name-search"
                  placeholder="Search for an agent name..."
                  class="w-full pl-10 pr-4 py-3 bg-black bg-opacity-20 border-2 border-white border-opacity-20 rounded-lg text-white placeholder-white placeholder-opacity-60 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-40 transition duration-200"
                />
                <button
                  id="search-button"
                  class="absolute right-0 top-0 h-full px-4 bg-white bg-opacity-20 rounded-r-lg text-white font-medium hover:bg-opacity-30 transition duration-200"
                >
                  Check
                </button>
              </div>
              <div id="search-result" class="mt-3 hidden">
                <div
                  id="name-available"
                  class="bg-success bg-opacity-20 text-white rounded-lg py-2 px-4 hidden"
                >
                  <span class="inline-block mr-2">✓</span>
                  <span class="name-display">@name</span> is available!
                </div>
                <div
                  id="name-taken"
                  class="bg-danger bg-opacity-20 text-white rounded-lg py-2 px-4 hidden"
                >
                  <span class="inline-block mr-2">✗</span>
                  <span class="name-display">@name</span> is already taken.
                </div>
                <div
                  id="name-invalid"
                  class="bg-warning bg-opacity-20 text-white rounded-lg py-2 px-4 hidden"
                >
                  <span class="inline-block mr-2">!</span> Please enter a valid
                  name (letters, numbers, and hyphens only).
                </div>
              </div>
            </div>

            <div class="mt-8 animate-fadeIn" style="animation-delay: 0.4s">
              <button
                id="welcome-login-button"
                class="button-primary text-lg py-4 px-8"
              >
                Sign Up to Track Progress
              </button>
            </div>

            <!-- Animated Stats Section -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-16">
              <div class="glass-card stagger-item">
                <div class="stat-number" id="stat-agents">0</div>
                <p class="text-gray-800 font-medium mt-2">Registered Agents</p>
              </div>
              <div class="glass-card stagger-item">
                <div class="stat-number" id="stat-credentials">0</div>
                <p class="text-gray-800 font-medium mt-2">Active Credentials</p>
              </div>
              <div class="glass-card stagger-item">
                <div class="stat-number" id="stat-transactions">0</div>
                <p class="text-gray-800 font-medium mt-2">
                  Secure Transactions
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Features Section -->
        <div class="py-16">
          <h2 class="text-3xl font-bold text-center mb-12">
            Why Choose AstroGrid?
          </h2>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="feature-card stagger-item">
              <div class="feature-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="30"
                  height="30"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-primary"
                >
                  <circle cx="12" cy="12" r="10"></circle>
                  <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                  <line x1="9" y1="9" x2="9.01" y2="9"></line>
                  <line x1="15" y1="9" x2="15.01" y2="9"></line>
                </svg>
              </div>
              <h3 class="text-xl font-bold mb-3">Unique Identity</h3>
              <p class="text-gray-600">
                Register a unique handle that represents your agent across the
                Internet Computer ecosystem.
              </p>
            </div>

            <div class="feature-card stagger-item">
              <div class="feature-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="30"
                  height="30"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-primary"
                >
                  <rect
                    x="3"
                    y="11"
                    width="18"
                    height="11"
                    rx="2"
                    ry="2"
                  ></rect>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
              </div>
              <h3 class="text-xl font-bold mb-3">Secure Credentials</h3>
              <p class="text-gray-600">
                Issue time-limited credentials with specific scopes to control
                access to your resources.
              </p>
            </div>

            <div class="feature-card stagger-item">
              <div class="feature-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="30"
                  height="30"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-primary"
                >
                  <polygon
                    points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"
                  ></polygon>
                </svg>
              </div>
              <h3 class="text-xl font-bold mb-3">Decentralized Trust</h3>
              <p class="text-gray-600">
                Built on the Internet Computer blockchain for decentralized,
                trustless authentication and authorization.
              </p>
            </div>
          </div>
        </div>

        <!-- How It Works Section - Simplified and More Balanced -->
        <div
          class="bg-gradient-to-br from-blue-50 to-gray-50 rounded-xl p-6 mb-16 relative overflow-hidden"
        >
          <h2 class="text-3xl font-bold text-center mb-8">How It Works</h2>

          <!-- Three-step process in a grid layout -->
          <div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Step 1 -->
            <div
              class="bg-white rounded-lg shadow-md overflow-hidden transition-all duration-300 hover:shadow-lg transform hover:-translate-y-1 stagger-item"
            >
              <div class="h-2 bg-primary w-full"></div>
              <div class="p-5">
                <div class="flex items-center mb-4">
                  <div
                    class="w-10 h-10 rounded-full bg-primary flex-shrink-0 flex items-center justify-center text-white font-bold text-lg mr-3"
                  >
                    1
                  </div>
                  <h3 class="text-xl font-bold">Register Your Handle</h3>
                </div>
                <p class="text-gray-600 mb-4">
                  Secure your unique identifier on the Internet Computer
                  blockchain with a simple annual registration.
                </p>

                <!-- Illustration for Step 1 -->
                <div class="bg-blue-50 rounded-lg p-4 flex justify-center">
                  <div class="relative w-full max-w-xs">
                    <div
                      class="bg-white rounded-lg border-2 border-gray-200 p-3 shadow-sm"
                    >
                      <div class="flex items-center mb-2">
                        <div
                          class="w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center text-white text-xs font-bold mr-2"
                        >
                          @
                        </div>
                        <div class="h-3 bg-gray-200 rounded w-24"></div>
                      </div>
                      <div class="mb-3">
                        <div class="h-2 bg-gray-200 rounded w-full mb-1"></div>
                        <div class="h-2 bg-gray-200 rounded w-4/5"></div>
                      </div>
                      <div class="mb-3">
                        <div
                          class="h-7 bg-gray-100 rounded border border-gray-300 w-full"
                        ></div>
                      </div>
                      <div class="flex justify-end">
                        <div class="h-7 w-20 bg-blue-500 rounded"></div>
                      </div>
                    </div>
                    <!-- Animated checkmark -->
                    <div
                      class="absolute -right-2 -top-2 bg-green-500 rounded-full w-8 h-8 flex items-center justify-center text-white border-2 border-white"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-5 w-5"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M5 13l4 4L19 7"
                        />
                      </svg>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Step 2 -->
            <div
              class="bg-white rounded-lg shadow-md overflow-hidden transition-all duration-300 hover:shadow-lg transform hover:-translate-y-1 stagger-item"
            >
              <div class="h-2 bg-secondary w-full"></div>
              <div class="p-5">
                <div class="flex items-center mb-4">
                  <div
                    class="w-10 h-10 rounded-full bg-secondary flex-shrink-0 flex items-center justify-center text-white font-bold text-lg mr-3"
                  >
                    2
                  </div>
                  <h3 class="text-xl font-bold">Issue Credentials</h3>
                </div>
                <p class="text-gray-600 mb-4">
                  Create time-bound authorization credentials with specific
                  permission scopes for other agents.
                </p>

                <!-- Illustration for Step 2 -->
                <div class="bg-blue-50 rounded-lg p-4 flex justify-center">
                  <div class="relative w-full max-w-xs">
                    <!-- Key icon -->
                    <div
                      class="absolute top-4 left-1/2 transform -translate-x-1/2 z-20"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-10 w-10 text-secondary animate-pulse"
                        style="animation-duration: 2s"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"
                        />
                      </svg>
                    </div>

                    <!-- Credential card -->
                    <div
                      class="mt-16 pt-6 pb-3 px-3 bg-white rounded-lg border-2 border-secondary shadow-md mx-auto"
                      style="width: 140px"
                    >
                      <div
                        class="text-xs font-medium text-center text-secondary mb-2"
                      >
                        Credential
                      </div>
                      <div class="text-xs mb-1">
                        Scope: <span class="font-mono text-blue-600">read</span>
                      </div>
                      <div class="text-xs mb-1">
                        Expires: <span class="font-mono text-red-600">24h</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Step 3 -->
            <div
              class="bg-white rounded-lg shadow-md overflow-hidden transition-all duration-300 hover:shadow-lg transform hover:-translate-y-1 stagger-item"
            >
              <div class="h-2 bg-primary-dark w-full"></div>
              <div class="p-5">
                <div class="flex items-center mb-4">
                  <div
                    class="w-10 h-10 rounded-full bg-primary-dark flex-shrink-0 flex items-center justify-center text-white font-bold text-lg mr-3"
                  >
                    3
                  </div>
                  <h3 class="text-xl font-bold">Secure Interactions</h3>
                </div>
                <p class="text-gray-600 mb-4">
                  Agents interact securely using the temporary credentials, with
                  automatic expiration for enhanced security.
                </p>

                <!-- Illustration for Step 3 -->
                <div class="bg-blue-50 rounded-lg p-4 flex justify-center">
                  <div class="relative w-full max-w-xs">
                    <!-- Lock icon -->
                    <div class="mx-auto flex justify-center mb-2">
                      <div class="relative">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="h-10 w-10 text-primary-dark"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
                          />
                        </svg>
                        <div class="absolute -right-1 -top-1">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-6 w-6 text-green-500"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
                            />
                          </svg>
                        </div>
                      </div>
                    </div>

                    <!-- Exchange illustration -->
                    <div class="relative">
                      <div class="flex justify-between items-center">
                        <div
                          class="w-10 h-10 rounded-full bg-blue-100 border border-blue-300 flex items-center justify-center"
                        >
                          <span class="text-xs font-bold text-blue-600"
                            >@A</span
                          >
                        </div>

                        <div class="flex-1 mx-2 h-1 bg-gray-200 relative">
                          <!-- Animated data packets -->
                          <div
                            class="animate-ping absolute h-2 w-2 -top-0.5 rounded-full bg-green-400"
                            style="animation-duration: 1.5s; left: 30%"
                          ></div>
                          <div
                            class="animate-ping absolute h-2 w-2 -top-0.5 rounded-full bg-blue-400"
                            style="
                              animation-duration: 1.5s;
                              animation-delay: 0.5s;
                              right: 30%;
                            "
                          ></div>
                        </div>

                        <div
                          class="w-10 h-10 rounded-full bg-purple-100 border border-purple-300 flex items-center justify-center"
                        >
                          <span class="text-xs font-bold text-purple-600"
                            >@B</span
                          >
                        </div>
                      </div>

                      <div
                        class="mt-3 p-2 text-xs font-mono bg-white border border-gray-200 rounded text-center"
                      >
                        <span class="text-green-600 font-medium">Verified</span>
                        · <span class="text-blue-600">23h:45m left</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Connection arrows for visual flow (visible on desktop) -->
          <div
            class="hidden md:block absolute top-1/2 left-1/3 transform -translate-y-1/2 -translate-x-12"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-8 w-8 text-gray-400"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13 7l5 5m0 0l-5 5m5-5H6"
              />
            </svg>
          </div>
          <div
            class="hidden md:block absolute top-1/2 right-1/3 transform -translate-y-1/2 translate-x-12"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-8 w-8 text-gray-400"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13 7l5 5m0 0l-5 5m5-5H6"
              />
            </svg>
          </div>
        </div>

        <!-- Example Use Case -->
        <div class="max-w-4xl mx-auto mb-20">
          <div class="card border-2 border-blue-500 stagger-item">
            <h3 class="text-2xl font-bold mb-4">Example Use Case</h3>
            <div class="flex flex-col md:flex-row gap-8">
              <div class="md:w-1/2">
                <div class="bg-blue-50 p-6 rounded-lg mb-4">
                  <h4 class="text-lg font-semibold text-blue-800 mb-2">
                    Scenario
                  </h4>
                  <p class="text-gray-700 mb-3">
                    Agent Alpha needs to access a resource controlled by Agent
                    Beta. The process works as follows:
                  </p>
                </div>
                <ol class="text-gray-700 list-decimal pl-6 space-y-4 text-left">
                  <li class="stagger-item">
                    Agent Alpha requests access using its registered handle
                    <span class="font-mono bg-gray-100 px-1 rounded"
                      >@alpha-agent</span
                    >
                  </li>
                  <li class="stagger-item">
                    Agent Beta issues a temporary credential with read-only
                    scope
                  </li>
                  <li class="stagger-item">
                    Agent Alpha uses the credential to access the resource
                  </li>
                  <li class="stagger-item">
                    The credential automatically expires after 24 hours
                  </li>
                </ol>
              </div>
              <div class="md:w-1/2 flex flex-col justify-center space-y-6">
                <!-- Code example -->
                <div class="bg-gray-900 rounded-lg overflow-hidden shadow-lg">
                  <div
                    class="flex items-center justify-between py-2 px-4 bg-gray-800"
                  >
                    <span class="text-white text-xs font-medium"
                      >Code Example</span
                    >
                    <div class="flex space-x-2">
                      <div class="w-3 h-3 rounded-full bg-red-500"></div>
                      <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                      <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    </div>
                  </div>
                  <div class="p-4 text-left">
                    <pre
                      class="text-xs font-mono text-blue-300 whitespace-pre-wrap"
                    ><span class="text-pink-400">import</span> <span class="text-green-400">{ AstroGrid }</span> <span class="text-pink-400">from</span> <span class="text-orange-300">"@astrogrid/client"</span>;

<span class="text-gray-500">// Initialize agents with their Internet Identity</span>
<span class="text-pink-400">const</span> <span class="text-blue-300">alphaAgent</span> = <span class="text-pink-400">await</span> AstroGrid.<span class="text-yellow-300">createAgent</span>(<span class="text-orange-300">"alpha-agent"</span>);
<span class="text-gray-500">// Request a credential from Beta Agent</span>
<span class="text-pink-400">const</span> <span class="text-blue-300">credential</span> = <span class="text-pink-400">await</span> alphaAgent.<span class="text-yellow-300">requestCredential</span>({
  <span class="text-green-400">target</span>: <span class="text-orange-300">"beta-agent"</span>,
  <span class="text-green-400">scope</span>: [<span class="text-orange-300">"read"</span>],
  <span class="text-green-400">duration</span>: <span class="text-purple-400">24</span> * <span class="text-purple-400">60</span> * <span class="text-purple-400">60</span> <span class="text-gray-500">// 24 hours in seconds</span>
});

<span class="text-gray-500">// Use the credential to access a resource</span>
<span class="text-pink-400">const</span> <span class="text-blue-300">response</span> = <span class="text-pink-400">await</span> alphaAgent.<span class="text-yellow-300">accessResource</span>({
  <span class="text-green-400">owner</span>: <span class="text-orange-300">"beta-agent"</span>,
  <span class="text-green-400">resourceId</span>: <span class="text-orange-300">"secure-data-123"</span>,
  <span class="text-green-400">credentialId</span>: credential.id
});</pre>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- CTA section with MailerLite signup form -->
        <div class="mb-20 stagger-item">
          <div
            class="max-w-xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden"
          >
            <div class="p-8">
              <!-- MailerLite Embedded Form -->
              <div class="ml-embedded" data-form="0DQLLL"></div>

              <!-- Alternative Action -->
              <div class="mt-6 text-center">
                <p class="text-gray-500 text-sm">
                  Have questions?
                  <a
                    href="mailto:info@avistar.ai"
                    class="text-primary hover:text-primary-dark"
                    >Contact us</a
                  >
                  for more information.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="app-dashboard" class="hidden">
        <div
          class="mb-8 flex flex-wrap border-b overflow-x-auto whitespace-nowrap"
        >
          <button class="tab tab-active" id="tab-register">
            Register Handle
          </button>
          <button class="tab" id="tab-handles">My Handles</button>
          <button class="tab" id="tab-credentials">Credentials</button>
        </div>

        <div id="register-section">
          <div class="card max-w-lg mx-auto">
            <h2 class="text-2xl font-bold mb-6">Register a Handle</h2>

            <div
              id="register-success"
              class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4 hidden"
            >
              Registration successful!
            </div>

            <div
              id="register-error"
              class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 hidden"
            >
              Error message here
            </div>

            <form id="register-form">
              <div class="mb-6">
                <label
                  for="handle"
                  class="block text-gray-700 font-medium mb-2"
                >
                  Handle
                </label>
                <div class="flex">
                  <span
                    class="bg-gray-200 text-gray-700 px-3 py-2 rounded-l-md border border-gray-300 flex items-center"
                  >
                    @
                  </span>
                  <input
                    type="text"
                    id="handle-input"
                    class="flex-grow border border-gray-300 rounded-r-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="agent007"
                    maxlength="20"
                  />
                </div>
                <p class="text-gray-600 text-sm mt-1">
                  Only lowercase letters, numbers, and hyphens. Max 20
                  characters.
                </p>

                <button
                  type="button"
                  id="check-availability-button"
                  class="mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium"
                >
                  Check availability
                </button>

                <p
                  id="handle-available"
                  class="text-green-600 text-sm mt-1 hidden"
                >
                  <span class="inline-block mr-1">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                      <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                  </span>
                  Available!
                </p>
              </div>

              <div class="mb-6">
                <p class="text-gray-700">
                  Registration Fee: <span class="font-bold">$9.99</span> per
                  year
                </p>
                <p class="text-gray-600 text-sm">
                  Paid in Internet Computer tokens (ICP)
                </p>
              </div>

              <div class="flex justify-end">
                <button
                  type="submit"
                  id="register-button"
                  class="button-primary"
                >
                  Register Handle
                </button>
              </div>
            </form>
          </div>
        </div>

        <div id="handles-section" class="hidden">
          <h2 class="text-2xl font-bold mb-6">Your Registered Handles</h2>
          <div id="no-handles" class="text-gray-600">
            You don't have any registered handles yet.
          </div>
          <div id="handles-list" class="grid gap-6 md:grid-cols-2 hidden">
            <!-- Handle cards will be added here dynamically -->
          </div>
        </div>

        <div id="credentials-section" class="hidden">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="card">
              <h2 class="text-2xl font-bold mb-6">Request Credential</h2>

              <div
                id="credential-success"
                class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4 hidden"
              >
                Credential issued successfully!
              </div>

              <div
                id="credential-error"
                class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 hidden"
              >
                Error message here
              </div>

              <form id="credential-form">
                <div class="mb-4">
                  <label
                    for="credential-handle"
                    class="block text-gray-700 font-medium mb-2"
                  >
                    Handle
                  </label>
                  <select
                    id="credential-handle"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                  >
                    <option value="">Select a handle</option>
                  </select>
                </div>

                <div class="mb-4">
                  <label
                    for="credential-scope"
                    class="block text-gray-700 font-medium mb-2"
                  >
                    Scope (comma separated)
                  </label>
                  <input
                    type="text"
                    id="credential-scope"
                    placeholder="read,write,admin"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                  />
                  <p class="text-gray-600 text-sm mt-1">
                    Define what this credential can be used for
                  </p>
                </div>

                <div class="mb-6">
                  <label
                    for="credential-duration"
                    class="block text-gray-700 font-medium mb-2"
                  >
                    Duration (hours)
                  </label>
                  <input
                    type="number"
                    id="credential-duration"
                    value="24"
                    min="1"
                    max="720"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                  />
                  <p class="text-gray-600 text-sm mt-1">
                    How long this credential will be valid (1-720 hours)
                  </p>
                </div>

                <div class="flex justify-end">
                  <button
                    type="submit"
                    id="issue-credential-button"
                    class="button-primary"
                  >
                    Issue Credential
                  </button>
                </div>
              </form>
            </div>

            <div class="card">
              <h2 class="text-2xl font-bold mb-6">Your Credentials</h2>

              <div id="no-credentials" class="text-gray-600">
                You don't have any credentials yet.
              </div>

              <div id="credentials-table" class="hidden">
                <div class="mb-6">
                  <h3 class="text-lg font-semibold mb-2">Credential List</h3>
                  <div class="overflow-x-auto shadow rounded-lg">
                    <table class="min-w-full bg-white">
                      <thead>
                        <tr>
                          <th
                            class="py-2 px-3 sm:px-4 border-b border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider hidden sm:table-cell"
                          >
                            ID
                          </th>
                          <th
                            class="py-2 px-3 sm:px-4 border-b border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
                          >
                            Handle
                          </th>
                          <th
                            class="py-2 px-3 sm:px-4 border-b border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
                          >
                            Status
                          </th>
                          <th
                            class="py-2 px-3 sm:px-4 border-b border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
                          >
                            Actions
                          </th>
                        </tr>
                      </thead>
                      <tbody id="credentials-list">
                        <!-- Credential rows will be added here dynamically -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

              <div
                id="credential-details"
                class="border border-gray-200 rounded-md p-4 hidden shadow-sm"
              >
                <h3 class="text-lg font-semibold mb-4">Credential Details</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  <div class="bg-gray-50 p-3 rounded">
                    <p class="text-sm text-gray-600 mb-1">ID:</p>
                    <p id="detail-id" class="font-mono text-sm break-all"></p>
                  </div>
                  <div class="bg-gray-50 p-3 rounded">
                    <p class="text-sm text-gray-600 mb-1">Handle:</p>
                    <p id="detail-handle" class="font-medium"></p>
                  </div>
                  <div class="bg-gray-50 p-3 rounded">
                    <p class="text-sm text-gray-600 mb-1">Scope:</p>
                    <p id="detail-scope" class="break-words"></p>
                  </div>
                  <div class="bg-gray-50 p-3 rounded">
                    <p class="text-sm text-gray-600 mb-1">Status:</p>
                    <p id="detail-status" class="text-green-600 font-medium">
                      Valid
                    </p>
                  </div>
                  <div class="bg-gray-50 p-3 rounded">
                    <p class="text-sm text-gray-600 mb-1">Issued:</p>
                    <p id="detail-issued" class="text-sm"></p>
                  </div>
                  <div class="bg-gray-50 p-3 rounded">
                    <p class="text-sm text-gray-600 mb-1">Expires:</p>
                    <p id="detail-expires" class="text-sm"></p>
                  </div>
                  <div
                    class="col-span-1 sm:col-span-2 bg-blue-50 p-3 rounded border border-blue-100"
                  >
                    <p class="text-sm text-blue-600 mb-1">Time Remaining:</p>
                    <p
                      id="detail-remaining"
                      class="text-blue-600 font-medium text-lg"
                    ></p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="bg-gray-800 text-white py-6">
      <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <div class="mb-4 md:mb-0">
            <h3 class="text-xl font-bold">AstroGrid</h3>
            <p class="text-gray-400">
              Secure Protocol for Agentic Registry and Communication
            </p>
          </div>
          <div>
            <p class="text-gray-400">Built on the Internet Computer</p>
          </div>
        </div>
      </div>
    </footer>

    <script>
      // Simple demo functions for the UI
      document.addEventListener("DOMContentLoaded", function () {
        // Animate the counters
        animateStatCounter("stat-agents", 0, 12583, 2500);
        animateStatCounter("stat-credentials", 0, 47921, 2500);
        animateStatCounter("stat-transactions", 0, 324756, 2500);

        // Add stagger animations to elements
        animateStaggerItems();

        // Add event listener for the bottom CTA button
        const bottomLoginButton = document.getElementById(
          "welcome-login-button-bottom",
        );
        if (bottomLoginButton) {
          bottomLoginButton.addEventListener("click", login);
        }

        // Mock data
        let isLoggedIn = false;
        let handles = [
          {
            handle: "@astrogrid-demo",
            owner: "2vxsx-fae",
            registeredAt: Date.now() - 30 * 24 * 60 * 60 * 1000, // 30 days ago
            expiresAt: Date.now() + 335 * 24 * 60 * 60 * 1000, // 335 days from now
            renewed: 0,
          },
        ];
        let credentials = [
          {
            id: "cred-abcdef1234567890",
            handle: "@astrogrid-demo",
            owner: "2vxsx-fae",
            scope: ["read", "write"],
            issuedAt: Date.now() - 2 * 60 * 60 * 1000, // 2 hours ago
            expiresAt: Date.now() + 22 * 60 * 60 * 1000, // 22 hours from now
            active: true,
          },
        ];

        // Function to animate counter
        function animateStatCounter(elementId, start, end, duration) {
          const element = document.getElementById(elementId);
          if (!element) return;

          const range = end - start;
          const minTimer = 50; // minimum timer
          const stepTime = Math.abs(Math.floor(duration / range));
          const startTime = new Date().getTime();
          const endTime = startTime + duration;
          let timer;

          function run() {
            const now = new Date().getTime();
            const remaining = Math.max((endTime - now) / duration, 0);
            const value = Math.round(end - remaining * range);
            element.textContent = value.toLocaleString();
            if (value === end) {
              clearInterval(timer);
            }
          }

          timer = setInterval(run, stepTime);
          run();
        }

        // Function to animate staggered items
        function animateStaggerItems() {
          const staggerItems = document.querySelectorAll(".stagger-item");
          let delay = 0;

          staggerItems.forEach((item, index) => {
            // Only animate items that are in the initial viewport or slightly below
            const rect = item.getBoundingClientRect();
            const isInViewport = rect.top < window.innerHeight + 300;

            if (isInViewport) {
              item.style.opacity = "0";
              item.style.transform = "translateY(20px)";
              item.style.transition = `opacity 0.5s ease, transform 0.5s ease`;
              item.style.transitionDelay = `${delay}s`;

              setTimeout(() => {
                item.style.opacity = "1";
                item.style.transform = "translateY(0)";
              }, 100);

              delay += 0.1;
            }
          });

          // Set up scroll handler for items out of initial viewport
          const handleScroll = () => {
            staggerItems.forEach((item) => {
              const rect = item.getBoundingClientRect();
              const isVisible = rect.top < window.innerHeight - 100;

              if (isVisible && item.style.opacity !== "1") {
                item.style.opacity = "0";
                item.style.transform = "translateY(20px)";
                item.style.transition =
                  "opacity 0.5s ease, transform 0.5s ease";

                setTimeout(() => {
                  item.style.opacity = "1";
                  item.style.transform = "translateY(0)";
                }, 100);
              }
            });
          };

          window.addEventListener("scroll", handleScroll);
          // Initial check
          handleScroll();
        }

        // DOM elements
        const welcomeScreen = document.getElementById("welcome-screen");
        const appDashboard = document.getElementById("app-dashboard");
        const loginButton = document.getElementById("login-button");
        const welcomeLoginButton = document.getElementById(
          "welcome-login-button",
        );
        const logoutButton = document.getElementById("logout-button");
        const userInfo = document.getElementById("user-info");
        const principalId = document.getElementById("principal-id");

        // Tab elements
        const tabRegister = document.getElementById("tab-register");
        const tabHandles = document.getElementById("tab-handles");
        const tabCredentials = document.getElementById("tab-credentials");
        const registerSection = document.getElementById("register-section");
        const handlesSection = document.getElementById("handles-section");
        const credentialsSection = document.getElementById(
          "credentials-section",
        );

        // Register form elements
        const registerForm = document.getElementById("register-form");
        const handleInput = document.getElementById("handle-input");
        const checkAvailabilityButton = document.getElementById(
          "check-availability-button",
        );
        const handleAvailable = document.getElementById("handle-available");
        const registerSuccess = document.getElementById("register-success");
        const registerError = document.getElementById("register-error");

        // Handles section elements
        const noHandles = document.getElementById("no-handles");
        const handlesList = document.getElementById("handles-list");

        // Credential form elements
        const credentialForm = document.getElementById("credential-form");
        const credentialHandle = document.getElementById("credential-handle");
        const credentialScope = document.getElementById("credential-scope");
        const credentialDuration = document.getElementById(
          "credential-duration",
        );
        const credentialSuccess = document.getElementById("credential-success");
        const credentialError = document.getElementById("credential-error");

        // Credentials section elements
        const noCredentials = document.getElementById("no-credentials");
        const credentialsTable = document.getElementById("credentials-table");
        const credentialsList = document.getElementById("credentials-list");
        const credentialDetails = document.getElementById("credential-details");

        // Login/logout functions
        function login() {
          isLoggedIn = true;
          welcomeScreen.classList.add("hidden");
          appDashboard.classList.remove("hidden");
          loginButton.classList.add("hidden");
          userInfo.classList.remove("hidden");
          updateUI();
        }

        function logout() {
          isLoggedIn = false;
          welcomeScreen.classList.remove("hidden");
          appDashboard.classList.add("hidden");
          loginButton.classList.remove("hidden");
          userInfo.classList.add("hidden");
        }

        // Event listeners for login/logout
        loginButton.addEventListener("click", login);
        welcomeLoginButton.addEventListener("click", login);
        logoutButton.addEventListener("click", logout);

        // Tab switching
        tabRegister.addEventListener("click", function () {
          setActiveTab("register");
        });

        tabHandles.addEventListener("click", function () {
          setActiveTab("handles");
        });

        tabCredentials.addEventListener("click", function () {
          setActiveTab("credentials");
        });

        function setActiveTab(tab) {
          // Reset all tabs and sections
          [tabRegister, tabHandles, tabCredentials].forEach((el) => {
            el.classList.remove("tab-active");
          });

          [registerSection, handlesSection, credentialsSection].forEach(
            (el) => {
              el.classList.add("hidden");
            },
          );

          // Set active tab and section
          if (tab === "register") {
            tabRegister.classList.add("tab-active");
            registerSection.classList.remove("hidden");
          } else if (tab === "handles") {
            tabHandles.classList.add("tab-active");
            handlesSection.classList.remove("hidden");
          } else if (tab === "credentials") {
            tabCredentials.classList.add("tab-active");
            credentialsSection.classList.remove("hidden");
          }
        }

        // Check handle availability
        checkAvailabilityButton.addEventListener("click", function () {
          const handle = handleInput.value.trim();
          if (!handle) return;

          // Mock check - always available except for existing handle
          const isAvailable = !handles.some(
            (h) => h.handle.toLowerCase() === `@${handle.toLowerCase()}`,
          );

          handleAvailable.classList.toggle("hidden", !isAvailable);

          if (!isAvailable) {
            registerError.textContent = "This handle is already taken";
            registerError.classList.remove("hidden");
          } else {
            registerError.classList.add("hidden");
          }
        });

        // Register handle form
        registerForm.addEventListener("submit", function (e) {
          e.preventDefault();

          const handle = handleInput.value.trim();
          if (!handle) {
            registerError.textContent = "Please enter a handle";
            registerError.classList.remove("hidden");
            return;
          }

          // Check format
          const handlePattern = /^[a-z0-9-]+$/;
          if (!handlePattern.test(handle)) {
            registerError.textContent =
              "Handle can only contain lowercase letters, numbers, and hyphens";
            registerError.classList.remove("hidden");
            return;
          }

          // Check length
          if (handle.length > 20) {
            registerError.textContent = "Handle must be 20 characters or less";
            registerError.classList.remove("hidden");
            return;
          }

          // Mock registration
          const normalizedHandle = `@${handle}`;
          const existingHandle = handles.find(
            (h) => h.handle.toLowerCase() === normalizedHandle.toLowerCase(),
          );

          if (existingHandle && existingHandle.expiresAt > Date.now()) {
            registerError.textContent =
              "This handle is already registered and not expired";
            registerError.classList.remove("hidden");
            return;
          }

          // Register new handle
          const newHandle = {
            handle: normalizedHandle,
            owner: "2vxsx-fae",
            registeredAt: Date.now(),
            expiresAt: Date.now() + 365 * 24 * 60 * 60 * 1000, // 1 year from now
            renewed: 0,
          };

          // Remove existing handle if exists
          if (existingHandle) {
            handles = handles.filter(
              (h) => h.handle.toLowerCase() !== normalizedHandle.toLowerCase(),
            );
          }

          // Add new handle
          handles.push(newHandle);

          // Show success message
          registerSuccess.textContent = `Successfully registered ${normalizedHandle}`;
          registerSuccess.classList.remove("hidden");
          registerError.classList.add("hidden");

          // Clear form
          handleInput.value = "";
          handleAvailable.classList.add("hidden");

          // Update UI
          updateUI();

          // Switch to handles tab after a delay
          setTimeout(() => {
            setActiveTab("handles");
            registerSuccess.classList.add("hidden");
          }, 2000);
        });

        // Credential form
        credentialForm.addEventListener("submit", function (e) {
          e.preventDefault();

          const handle = credentialHandle.value;
          const scope = credentialScope.value.trim();
          const duration = parseInt(credentialDuration.value, 10);

          if (!handle) {
            credentialError.textContent = "Please select a handle";
            credentialError.classList.remove("hidden");
            return;
          }

          if (!scope) {
            credentialError.textContent =
              "Please enter a scope for the credential";
            credentialError.classList.remove("hidden");
            return;
          }

          if (!duration || duration <= 0) {
            credentialError.textContent = "Please enter a valid duration";
            credentialError.classList.remove("hidden");
            return;
          }

          // Mock credential creation
          const newCredential = {
            id: "cred-" + Math.random().toString(36).substring(2, 15),
            handle: handle,
            owner: "2vxsx-fae",
            scope: scope.split(",").map((s) => s.trim()),
            issuedAt: Date.now(),
            expiresAt: Date.now() + duration * 60 * 60 * 1000,
            active: true,
          };

          // Add new credential
          credentials.push(newCredential);

          // Show success message
          credentialSuccess.textContent = `Successfully issued credential with ID: ${newCredential.id}`;
          credentialSuccess.classList.remove("hidden");
          credentialError.classList.add("hidden");

          // Clear form
          credentialScope.value = "";
          credentialDuration.value = "24";

          // Update UI
          updateUI();

          // Hide success message after a delay
          setTimeout(() => {
            credentialSuccess.classList.add("hidden");
          }, 3000);
        });

        // Update UI with current data
        function updateUI() {
          // Update handle dropdown
          credentialHandle.innerHTML =
            '<option value="">Select a handle</option>';
          handles.forEach((handle) => {
            if (handle.expiresAt > Date.now()) {
              // Only show unexpired handles
              const option = document.createElement("option");
              option.value = handle.handle;
              option.textContent = handle.handle;
              credentialHandle.appendChild(option);
            }
          });

          // Update handles list
          if (handles.length === 0) {
            noHandles.classList.remove("hidden");
            handlesList.classList.add("hidden");
          } else {
            noHandles.classList.add("hidden");
            handlesList.classList.remove("hidden");
            handlesList.innerHTML = "";

            handles.forEach((handle) => {
              const now = Date.now();
              const daysRemaining = Math.max(
                0,
                Math.floor((handle.expiresAt - now) / (24 * 60 * 60 * 1000)),
              );
              const expired = handle.expiresAt <= now;

              const handleCard = document.createElement("div");
              handleCard.innerHTML = `
              <div class="card">
                <div class="flex justify-between items-start">
                  <div>
                    <h3 class="text-xl font-bold text-gray-800">${handle.handle}</h3>
                    <p class="text-gray-600 mt-1">
                      Registered: ${new Date(handle.registeredAt).toLocaleDateString()}
                    </p>
                    ${handle.renewed > 0 ? `<p class="text-gray-600">Renewals: ${handle.renewed}</p>` : ""}
                  </div>
                  
                  <div class="badge ${expired ? "badge-red" : daysRemaining <= 30 ? "badge-yellow" : "badge-green"}">
                    ${expired ? "Expired" : daysRemaining <= 30 ? `${daysRemaining} days left` : "Active"}
                  </div>
                </div>
                
                <div class="mt-4">
                  <h4 class="text-sm font-medium text-gray-700">Expiration Date</h4>
                  <p class="${expired ? "text-red-600" : "text-gray-800"}">
                    ${new Date(handle.expiresAt).toLocaleDateString()}
                  </p>
                </div>
                
                ${
                  expired
                    ? `
                <div class="mt-4 bg-red-50 border-l-4 border-red-400 p-4">
                  <div class="flex">
                    <div class="flex-shrink-0 text-red-400">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                      </svg>
                    </div>
                    <div class="ml-3">
                      <p class="text-sm text-red-700">
                        This handle has expired and may be registered by someone else.
                      </p>
                    </div>
                  </div>
                </div>
                `
                    : daysRemaining <= 30
                      ? `
                <div class="mt-4 bg-yellow-50 border-l-4 border-yellow-400 p-4">
                  <div class="flex">
                    <div class="flex-shrink-0 text-yellow-400">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                      </svg>
                    </div>
                    <div class="ml-3">
                      <p class="text-sm text-yellow-700">
                        Your handle is expiring soon. Please renew to maintain ownership.
                      </p>
                    </div>
                  </div>
                </div>
                `
                      : ""
                }
                
                <div class="border-t mt-4 pt-4">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-gray-700">
                        Renewal Fee: <span class="font-bold">$9.99</span>
                      </p>
                      <p class="text-gray-600 text-sm">
                        Extends registration by 1 year
                      </p>
                    </div>
                    
                    <button
                      class="button-primary renew-button"
                      data-handle="${handle.handle}"
                    >
                      Renew Handle
                    </button>
                  </div>
                </div>
              </div>
            `;

              handlesList.appendChild(handleCard);
            });

            // Add event listeners to renewal buttons
            document.querySelectorAll(".renew-button").forEach((button) => {
              button.addEventListener("click", function () {
                const handleName = this.getAttribute("data-handle");
                renewHandle(handleName);
              });
            });
          }

          // Update credentials list
          if (credentials.length === 0) {
            noCredentials.classList.remove("hidden");
            credentialsTable.classList.add("hidden");
          } else {
            noCredentials.classList.add("hidden");
            credentialsTable.classList.remove("hidden");
            credentialsList.innerHTML = "";

            credentials.forEach((credential) => {
              const now = Date.now();
              const isActive = credential.active;
              const isExpired = credential.expiresAt <= now;

              const row = document.createElement("tr");
              row.innerHTML = `
              <td class="py-2 px-3 sm:px-4 border-b border-gray-200 text-sm hidden sm:table-cell">
                <span class="font-mono text-xs">${credential.id.substring(0, 8)}...</span>
              </td>
              <td class="py-2 px-3 sm:px-4 border-b border-gray-200 text-sm">
                <div class="flex flex-col">
                  <span>${credential.handle}</span>
                  <span class="text-xs font-mono text-gray-500 sm:hidden">${credential.id.substring(0, 8)}...</span>
                </div>
              </td>
              <td class="py-2 px-3 sm:px-4 border-b border-gray-200 text-sm">
                <span class="badge ${!isActive ? "badge-red" : isExpired ? "badge-yellow" : "badge-green"}">
                  ${!isActive ? "Revoked" : isExpired ? "Expired" : "Active"}
                </span>
              </td>
              <td class="py-2 px-3 sm:px-4 border-b border-gray-200 text-sm">
                <div class="flex flex-wrap gap-2">
                  <button
                    class="text-blue-600 hover:text-blue-800 py-1 px-2 rounded border border-blue-200 hover:bg-blue-50 verify-button flex items-center"
                    data-id="${credential.id}"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                      <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <span>Verify</span>
                  </button>
                  ${
                    isActive && !isExpired
                      ? `
                  <button
                    class="text-red-600 hover:text-red-800 py-1 px-2 rounded border border-red-200 hover:bg-red-50 revoke-button flex items-center"
                    data-id="${credential.id}"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                      <path d="M18 6L6 18M6 6l12 12"></path>
                    </svg>
                    <span>Revoke</span>
                  </button>
                  `
                      : ""
                  }
                </div>
              </td>
            `;

              credentialsList.appendChild(row);
            });

            // Add event listeners to credential buttons
            document.querySelectorAll(".verify-button").forEach((button) => {
              button.addEventListener("click", function () {
                const credentialId = this.getAttribute("data-id");
                verifyCredential(credentialId);
              });
            });

            document.querySelectorAll(".revoke-button").forEach((button) => {
              button.addEventListener("click", function () {
                const credentialId = this.getAttribute("data-id");
                revokeCredential(credentialId);
              });
            });
          }
        }

        // Mock renewal function
        function renewHandle(handleName) {
          const handle = handles.find((h) => h.handle === handleName);
          if (!handle) return;

          // Update handle expiration
          handle.expiresAt =
            Math.max(Date.now(), handle.expiresAt) + 365 * 24 * 60 * 60 * 1000;
          handle.renewed++;

          // Update UI
          updateUI();

          // Show success message
          alert(`Successfully renewed ${handleName}`);
        }

        // Mock verify credential function
        function verifyCredential(credentialId) {
          const credential = credentials.find((c) => c.id === credentialId);
          if (!credential) return;

          const now = Date.now();

          if (!credential.active) {
            alert("Credential has been revoked");
            return;
          }

          if (credential.expiresAt <= now) {
            alert("Credential has expired");
            return;
          }

          // Show credential details
          const remainingTime = Math.max(
            0,
            Math.floor((credential.expiresAt - now) / 1000),
          ); // seconds

          document.getElementById("detail-id").textContent = credential.id;
          document.getElementById("detail-handle").textContent =
            credential.handle;
          document.getElementById("detail-scope").textContent =
            credential.scope.join(", ");
          document.getElementById("detail-issued").textContent = new Date(
            credential.issuedAt,
          ).toLocaleString();
          document.getElementById("detail-expires").textContent = new Date(
            credential.expiresAt,
          ).toLocaleString();

          let remainingText;
          if (remainingTime < 60) {
            remainingText = `${remainingTime} seconds`;
          } else if (remainingTime < 3600) {
            remainingText = `${Math.floor(remainingTime / 60)} minutes`;
          } else if (remainingTime < 86400) {
            remainingText = `${Math.floor(remainingTime / 3600)} hours`;
          } else {
            remainingText = `${Math.floor(remainingTime / 86400)} days`;
          }

          document.getElementById("detail-remaining").textContent =
            remainingText;
          credentialDetails.classList.remove("hidden");
        }

        // Mock revoke credential function
        function revokeCredential(credentialId) {
          const credential = credentials.find((c) => c.id === credentialId);
          if (!credential) return;

          // Revoke credential
          credential.active = false;

          // Update UI
          updateUI();

          // Hide credential details if showing the revoked credential
          if (
            document.getElementById("detail-id").textContent === credentialId
          ) {
            credentialDetails.classList.add("hidden");
          }

          // Show success message
          alert(`Successfully revoked credential ${credentialId}`);
        }

        // Setup name search on the landing page
        function setupNameSearch() {
          const nameSearch = document.getElementById("name-search");
          const searchButton = document.getElementById("search-button");
          const searchResult = document.getElementById("search-result");
          const nameAvailable = document.getElementById("name-available");
          const nameTaken = document.getElementById("name-taken");
          const nameInvalid = document.getElementById("name-invalid");
          const nameDisplayElements =
            document.querySelectorAll(".name-display");

          // Valid handle format check
          function isValidHandle(handle) {
            return /^[a-z0-9-]+$/.test(handle);
          }

          // Function to check handle availability
          function checkHandleAvailability(handle) {
            if (!handle) {
              hideAllResults();
              return;
            }

            // Update name display in result messages
            nameDisplayElements.forEach((el) => {
              el.textContent = `@${handle}`;
            });

            // Check if the handle format is valid
            if (!isValidHandle(handle)) {
              showInvalidResult();
              return;
            }

            // Mock availability check - compare against existing handles
            const isAvailable = !handles.some(
              (h) => h.handle.toLowerCase() === `@${handle.toLowerCase()}`,
            );

            if (isAvailable) {
              showAvailableResult();
            } else {
              showTakenResult();
            }
          }

          // Helper functions to show/hide result messages
          function hideAllResults() {
            nameAvailable.classList.add("hidden");
            nameTaken.classList.add("hidden");
            nameInvalid.classList.add("hidden");
            searchResult.classList.add("hidden");
          }

          function showAvailableResult() {
            nameAvailable.classList.remove("hidden");
            nameTaken.classList.add("hidden");
            nameInvalid.classList.add("hidden");
            searchResult.classList.remove("hidden");
          }

          function showTakenResult() {
            nameAvailable.classList.add("hidden");
            nameTaken.classList.remove("hidden");
            nameInvalid.classList.add("hidden");
            searchResult.classList.remove("hidden");
          }

          function showInvalidResult() {
            nameAvailable.classList.add("hidden");
            nameTaken.classList.add("hidden");
            nameInvalid.classList.remove("hidden");
            searchResult.classList.remove("hidden");
          }

          // Event listeners
          if (searchButton) {
            searchButton.addEventListener("click", function () {
              const handle = nameSearch.value.trim();
              checkHandleAvailability(handle);
            });
          }

          if (nameSearch) {
            nameSearch.addEventListener("keypress", function (e) {
              if (e.key === "Enter") {
                e.preventDefault();
                const handle = nameSearch.value.trim();
                checkHandleAvailability(handle);
              }
            });

            // Clear results when input is cleared
            nameSearch.addEventListener("input", function () {
              if (nameSearch.value.trim() === "") {
                hideAllResults();
              }
            });
          }
        }

        // Initialize feather icons
        if (typeof feather !== "undefined") {
          feather.replace();
        }

        // Initial UI update
        updateUI();

        // Setup name search functionality
        setupNameSearch();
      });
    </script>
  </body>
</html>
